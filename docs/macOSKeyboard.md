# MacOS keyboard information

See AppleHIDUsageTables.h for apple specific HID values
https://opensource.apple.com/source/IOHIDFamily/IOHIDFamily-1035.41.2/IOHIDFamily/AppleHIDUsageTables.h.auto.html

## HID Report Descriptor

``` c
const uint8_t macOSInternalKeyboardReportDescriptor[] = {
    0x05, 0x01,        // Usage Page (Generic Desktop Ctrls)
    0x09, 0x06,        // Usage (Keyboard)
    0xA1, 0x01,        // Collection (Application)
    0x85, 0x01,        //   Report ID (1)
    // Modifier keys
    0x05, 0x07,        //   Usage Page (Kbrd/Keypad)
    0x19, 0xE0,        //   Usage Minimum (0xE0)
    0x29, 0xE7,        //   Usage Maximum (0xE7)
    0x15, 0x00,        //   Logical Minimum (0)
    0x25, 0x01,        //   Logical Maximum (1)
    0x75, 0x01,        //   Report Size (1)
    0x95, 0x08,        //   Report Count (8)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    // Reserved
    0x95, 0x01,        //   Report Count (1)
    0x75, 0x08,        //   Report Size (8)
    0x81, 0x01,        //   Input (Const,Array,Abs,No Wrap,Linear,Preferred State,No Null Position)
    // LEDs
    0x95, 0x05,        //   Report Count (5)
    0x75, 0x01,        //   Report Size (1)
    0x05, 0x08,        //   Usage Page (LEDs)
    0x19, 0x01,        //   Usage Minimum (Num Lock)
    0x29, 0x05,        //   Usage Maximum (Kana)
    0x91, 0x02,        //   Output (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position,Non-volatile)
    0x95, 0x01,        //   Report Count (1)
    0x75, 0x03,        //   Report Size (3)
    0x91, 0x01,        //   Output (Const,Array,Abs,No Wrap,Linear,Preferred State,No Null Position,Non-volatile)
    // Keys (6)
    0x95, 0x06,        //   Report Count (6)
    0x75, 0x08,        //   Report Size (8)
    0x15, 0x00,        //   Logical Minimum (0)
    0x26, 0xFF, 0x00,  //   Logical Maximum (255)
    0x05, 0x07,        //   Usage Page (Kbrd/Keypad)
    0x19, 0x00,        //   Usage Minimum (0x00)
    0x29, 0xFF,        //   Usage Maximum (0xFF)
    0x81, 0x00,        //   Input (Data,Array,Abs,No Wrap,Linear,Preferred State,No Null Position)
    // Consumer
    0x05, 0x0C,        //   Usage Page (Consumer)
    0x75, 0x01,        //   Report Size (1)
    0x95, 0x01,        //   Report Count (1)
    0x09, 0xB8,        //   Usage (Eject)
    0x15, 0x00,        //   Logical Minimum (0)
    0x25, 0x01,        //   Logical Maximum (1)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x05, 0xFF,        //   Usage Page (Reserved 0xFF)
    0x09, 0x03,        //   Usage (0x03)
    0x75, 0x07,        //   Report Size (7)
    0x95, 0x01,        //   Report Count (1)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0xC0,              // End Collection (11 bytes)

    0x05, 0x0C,        // Usage Page (Consumer)
    0x09, 0x01,        // Usage (Consumer Control)
    0xA1, 0x01,        // Collection (Application)
    0x85, 0x52,        //   Report ID (82)
    0x15, 0x00,        //   Logical Minimum (0)
    0x25, 0x01,        //   Logical Maximum (1)
    0x75, 0x01,        //   Report Size (1)
    0x95, 0x01,        //   Report Count (1)
    0x09, 0xCD,        //   Usage (Play/Pause)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x09, 0xB3,        //   Usage (Fast Forward)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x09, 0xB4,        //   Usage (Rewind)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x09, 0xB5,        //   Usage (Scan Next Track)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x09, 0xB6,        //   Usage (Scan Previous Track)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x81, 0x01,        //   Input (Const,Array,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x81, 0x01,        //   Input (Const,Array,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x81, 0x01,        //   Input (Const,Array,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0x85, 0x09,        //   Report ID (9)
    0x15, 0x00,        //   Logical Minimum (0)
    0x25, 0x01,        //   Logical Maximum (1)
    0x75, 0x08,        //   Report Size (8)
    0x95, 0x01,        //   Report Count (1)
    0x06, 0x01, 0xFF,  //   Usage Page (Vendor Defined 0xFF01, kHIDPage_AppleVendorKeyboard)
    0x09, 0x0B,        //   Usage (Vendor Defined 0x0B, kHIDUsage_AppleVendor_DeviceManagement)
    0xB1, 0x02,        //   Feature (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position,Non-volatile)
    0x75, 0x08,        //   Report Size (8)
    0x95, 0x02,        //   Report Count (2)
    0xB1, 0x01,        //   Feature (Const,Array,Abs,No Wrap,Linear,Preferred State,No Null Position,Non-volatile)
    0xC0,              // End Collection (6 bytes total? 82 = 2 bytes?, 9 = 4 bytes. Can you have two report IDs in the same report?)

    0x06, 0x00, 0xFF,  // Usage Page (Vendor Defined 0xFF00, kHIDPage_AppleVendor)
    0x09, 0x06,        // Usage (Vendor Defined 0x06, kHIDUsage_AppleVendor_Keyboard)
    0xA1, 0x01,        // Collection (Application)
    0x06, 0x00, 0xFF,  //   Usage Page (Vendor Defined 0xFF00, kHIDPage_AppleVendor)
    0x09, 0x06,        //   Usage (Vendor Defined 0x06, kHIDUsage_AppleVendor_Keyboard)
    0x15, 0x00,        //   Logical Minimum (0)
    0x26, 0xFF, 0x00,  //   Logical Maximum (255)
    0x75, 0x08,        //   Report Size (8)
    0x95, 0x40,        //   Report Count (64)
    0x85, 0x3F,        //   Report ID (63)
    0x81, 0x22,        //   Input (Data,Var,Abs,No Wrap,Linear,No Preferred State,No Null Position)
    0xC0,              // End Collection (65 bytes)

    0x06, 0x00, 0xFF,  // Usage Page (Vendor Defined 0xFF00, kHIDPage_AppleVendor)
    0x09, 0x0F,        // Usage (Vendor Defined 0x0F, kHIDUsage_AppleVendor_KeyboardBacklight)
    0xA1, 0x01,        // Collection (Application)
    0x06, 0x00, 0xFF,  //   Usage Page (Vendor Defined 0xFF00, kHIDPage_AppleVendor)
    0x09, 0x0F,        //   Usage (Vendor Defined 0x0F, kHIDUsage_AppleVendor_KeyboardBacklight)
    0x15, 0x00,        //   Logical Minimum (0)
    0x26, 0xFF, 0x00,  //   Logical Maximum (255)
    0x75, 0x08,        //   Report Size (8)
    0x95, 0x0F,        //   Report Count (15)
    0x85, 0xBF,        //   Report ID (-65)
    0x81, 0x02,        //   Input (Data,Var,Abs,No Wrap,Linear,Preferred State,No Null Position)
    0xC0,              // End Collection (16 bytes)
};
```

## HID Value elements
Values potentiall received in IOHIDDeviceRegisterInputValueCallback

``` c
// Generic Desktop / Keyboard
element[0]: usagePage(1) usage (6)

// Keyboard / Modifier
element[1]: usagePage(7) usage (224)
...
element[8]: usagePage(7) usage (231)

// Keyboard / Reserved?
element[9]: usagePage(7) usage (-1)
element[10]: usagePage(7) usage (-1)
element[11]: usagePage(7) usage (-1)
element[12]: usagePage(7) usage (-1)
element[13]: usagePage(7) usage (-1)
element[14]: usagePage(7) usage (-1)
element[15]: usagePage(7) usage (-1)

// Keyboard / Keys
element[16]: usagePage(7) usage (0)
...
element[271]: usagePage(7) usage (255)

// Consumer / Eject?
element[272]: usagePage(12) usage (184)

// LEDs / 1-5?
element[273]: usagePage(8) usage (1)
element[274]: usagePage(8) usage (2)
element[275]: usagePage(8) usage (3)
element[276]: usagePage(8) usage (4)
element[277]: usagePage(8) usage (5)

// Vendor defined / FN?
element[278]: usagePage(255) usage (3)

// Consumer / ???
element[279]: usagePage(12) usage (1)
element[280]: usagePage(12) usage (205)
element[281]: usagePage(12) usage (179)
element[282]: usagePage(12) usage (180)
element[283]: usagePage(12) usage (181)
element[284]: usagePage(12) usage (182)

// kHIDPage_AppleVendorKeyboard / kHIDUsage_AppleVendor_DeviceManagement?
element[285]: usagePage(65281) usage (11)

// kHIDPage_AppleVendor / kHIDUsage_AppleVendor_Keyboard
element[286]: usagePage(65280) usage (6)
element[287]: usagePage(65280) usage (6)
element[288]: usagePage(65280) usage (6)
element[289]: usagePage(65280) usage (6)
element[290]: usagePage(65280) usage (6)
element[291]: usagePage(65280) usage (6)
element[292]: usagePage(65280) usage (6)
element[293]: usagePage(65280) usage (6)
element[294]: usagePage(65280) usage (6)
element[295]: usagePage(65280) usage (6)
element[296]: usagePage(65280) usage (6)
element[297]: usagePage(65280) usage (6)
element[298]: usagePage(65280) usage (6)
element[299]: usagePage(65280) usage (6)
element[300]: usagePage(65280) usage (6)
element[301]: usagePage(65280) usage (6)
element[302]: usagePage(65280) usage (6)
element[303]: usagePage(65280) usage (6)
element[304]: usagePage(65280) usage (6)
element[305]: usagePage(65280) usage (6)
element[306]: usagePage(65280) usage (6)
element[307]: usagePage(65280) usage (6)
element[308]: usagePage(65280) usage (6)
element[309]: usagePage(65280) usage (6)
element[310]: usagePage(65280) usage (6)
element[311]: usagePage(65280) usage (6)
element[312]: usagePage(65280) usage (6)
element[313]: usagePage(65280) usage (6)
element[314]: usagePage(65280) usage (6)
element[315]: usagePage(65280) usage (6)
element[316]: usagePage(65280) usage (6)
element[317]: usagePage(65280) usage (6)
element[318]: usagePage(65280) usage (6)
element[319]: usagePage(65280) usage (6)
element[320]: usagePage(65280) usage (6)
element[321]: usagePage(65280) usage (6)
element[322]: usagePage(65280) usage (6)
element[323]: usagePage(65280) usage (6)
element[324]: usagePage(65280) usage (6)
element[325]: usagePage(65280) usage (6)
element[326]: usagePage(65280) usage (6)
element[327]: usagePage(65280) usage (6)
element[328]: usagePage(65280) usage (6)
element[329]: usagePage(65280) usage (6)
element[330]: usagePage(65280) usage (6)
element[331]: usagePage(65280) usage (6)
element[332]: usagePage(65280) usage (6)
element[333]: usagePage(65280) usage (6)
element[334]: usagePage(65280) usage (6)
element[335]: usagePage(65280) usage (6)
element[336]: usagePage(65280) usage (6)
element[337]: usagePage(65280) usage (6)
element[338]: usagePage(65280) usage (6)
element[339]: usagePage(65280) usage (6)
element[340]: usagePage(65280) usage (6)
element[341]: usagePage(65280) usage (6)
element[342]: usagePage(65280) usage (6)
element[343]: usagePage(65280) usage (6)
element[344]: usagePage(65280) usage (6)
element[345]: usagePage(65280) usage (6)
element[346]: usagePage(65280) usage (6)
element[347]: usagePage(65280) usage (6)
element[348]: usagePage(65280) usage (6)
element[349]: usagePage(65280) usage (6)
element[350]: usagePage(65280) usage (6)
element[351]: usagePage(65280) usage (6)

// kHIDPage_AppleVendor / kHIDUsage_AppleVendor_KeyboardBacklight
element[352]: usagePage(65280) usage (15)
element[353]: usagePage(65280) usage (15)
element[354]: usagePage(65280) usage (15)
element[355]: usagePage(65280) usage (15)
element[356]: usagePage(65280) usage (15)
element[357]: usagePage(65280) usage (15)
element[358]: usagePage(65280) usage (15)
element[359]: usagePage(65280) usage (15)
element[360]: usagePage(65280) usage (15)
element[361]: usagePage(65280) usage (15)
element[362]: usagePage(65280) usage (15)
element[363]: usagePage(65280) usage (15)
element[364]: usagePage(65280) usage (15)
element[365]: usagePage(65280) usage (15)
element[366]: usagePage(65280) usage (15)
element[367]: usagePage(65280) usage (15)
element[368]: usagePage(65280) usage (15)

// Unknown
element[369]: usagePage(0) usage (-1)
element[370]: usagePage(0) usage (0)
element[371]: usagePage(0) usage (-1)
element[372]: usagePage(0) usage (0)
element[373]: usagePage(0) usage (-1)
element[374]: usagePage(0) usage (0)
element[375]: usagePage(0) usage (-1)
element[376]: usagePage(0) usage (0)
element[377]: usagePage(0) usage (-1)
element[378]: usagePage(0) usage (0)
element[379]: usagePage(0) usage (-1)
element[380]: usagePage(0) usage (0)
```